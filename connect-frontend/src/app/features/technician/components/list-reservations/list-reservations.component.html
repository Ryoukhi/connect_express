<div class="p-6">
  <h2 class="text-xl font-bold mb-4">Réservations confirmées aujourd'hui</h2>

  <div *ngIf="loading" class="text-sm text-slate-400">Chargement…</div>
  <div *ngIf="!loading && reservations.length === 0" class="text-sm text-slate-400">Aucune réservation confirmée
    aujourd'hui.</div>

  <ul *ngIf="!loading && reservations.length" class="space-y-3">
    <li *ngFor="let r of reservations" class="bg-white p-4 rounded shadow flex justify-between items-start">
      <div>
        <div class="font-bold">{{ r.scheduledTime | date:'HH:mm' }} — {{ r.description || 'Réservation' }}</div>
        <div class="text-sm text-slate-500">{{ r.neighborhood }}{{ r.city ? (', ' + r.city) : '' }} • {{ r.price ?
          (r.price + ' F') : '' }}</div>
      </div>
      <div class="flex gap-2">
        <button class="px-3 py-1 bg-blue-600 text-white rounded text-sm" (click)="viewDetails(r)">Voir détails</button>
        <a [routerLink]="['/dashboard-technicien/reservation', r.idReservation]"
          class="px-3 py-1 border rounded text-sm text-blue-600 hover:underline">Voir la page</a>
      </div>
    </li>
  </ul>

  <!-- DETAILS MODAL / PANEL -->
  <div *ngIf="selected" class="fixed inset-0 z-50 flex items-center justify-center bg-black/30">
    <div class="bg-white rounded p-6 w-11/12 md:w-2/3">
      <div class="flex justify-between items-start">
        <h3 class="font-bold text-lg">Détails de la réservation</h3>
        <button (click)="closeDetails()" class="text-slate-400 hover:text-slate-600">✕</button>
      </div>

      <div *ngIf="selectedLoading" class="text-sm text-slate-400 mt-4">Chargement…</div>
      <div *ngIf="selectedError" class="text-sm text-red-500 mt-4">{{ selectedError }}</div>

      <div *ngIf="!selectedLoading && !selectedError" class="mt-4 grid grid-cols-2 gap-4">
        <div>
          <p class="text-sm text-slate-500">Client</p>
          <p class="font-bold">{{ selected.idClient ? ('Client #' + selected.idClient) : 'Client' }}</p>

          <p class="text-sm text-slate-500 mt-3">Adresse</p>
          <p>{{ selected.neighborhood }}{{ selected.city ? (', ' + selected.city) : '' }}</p>
        </div>
        <div>
          <p class="text-sm text-slate-500">Heure prévue</p>
          <p class="font-bold">{{ selected.scheduledTime | date:'EEE, d MMM HH:mm' }}</p>

          <p class="text-sm text-slate-500 mt-3">Prix</p>
          <p class="font-bold">{{ selected.price | number:'1.0-0' }} F</p>
        </div>
      </div>

      <div class="mt-6 flex justify-end gap-2">
        <button class="px-4 py-2 bg-gray-200 rounded" (click)="closeDetails()">Fermer</button>
      </div>
    </div>
  </div>

  <div class="w-full max-w-7xl mx-auto p-8 bg-gray-900 text-gray-200 rounded-2xl shadow-2xl
    border border-gray-700 space-y-10 relative overflow-hidden transition-all duration-300 ease-in-out
    backdrop-blur-sm ring-1 hidden ring-gray-800 selection:bg-indigo-600 selection:text-white">

    <div class="border-b border-gray-700 pb-4">
      <h1 class="text-3xl font-bold text-white">Internal Dashboard</h1>
      <p class="text-sm text-gray-400 mt-2">
        This section is hidden by default and can be revealed dynamically.
      </p>
    </div>

    <div class="bg-gray-800 rounded-xl p-6 shadow-lg">
      <h2 class="text-xl font-semibold mb-4 text-indigo-400">User Information</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <p class="text-gray-400 text-sm">Full Name</p>
          <p class="font-medium">John Doe</p>
        </div>
        <div>
          <p class="text-gray-400 text-sm">Email</p>
          <p class="font-medium">john.doe@example.com</p>
        </div>
        <div>
          <p class="text-gray-400 text-sm">Role</p>
          <p class="font-medium">Administrator</p>
        </div>
        <div>
          <p class="text-gray-400 text-sm">Status</p>
          <span class="inline-block px-3 py-1 text-xs rounded-full bg-green-600/20 text-green-400">
            Active
          </span>
        </div>
      </div>
    </div>

    <div class="bg-gray-800 rounded-xl p-6 shadow-lg">
      <h2 class="text-xl font-semibold mb-6 text-indigo-400">Settings</h2>

      <form class="space-y-5">
        <div>
          <label class="block text-sm text-gray-400 mb-1">Username</label>
          <input type="text"
            class="w-full rounded-lg bg-gray-900 border border-gray-700 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"
            placeholder="Enter username" />
        </div>

        <div>
          <label class="block text-sm text-gray-400 mb-1">Email</label>
          <input type="email"
            class="w-full rounded-lg bg-gray-900 border border-gray-700 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"
            placeholder="Enter email" />
        </div>

        <div>
          <label class="block text-sm text-gray-400 mb-1">Role</label>
          <select
            class="w-full rounded-lg bg-gray-900 border border-gray-700 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
            <option>Admin</option>
            <option>Editor</option>
            <option>Viewer</option>
          </select>
        </div>

        <div class="flex items-center gap-3">
          <input type="checkbox" class="accent-indigo-500">
          <span class="text-sm text-gray-300">Enable notifications</span>
        </div>

        <button type="submit" class="px-6 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-lg font-medium transition">
          Save changes
        </button>
      </form>
    </div>

    <div class="bg-gray-800 rounded-xl p-6 shadow-lg overflow-x-auto">
      <h2 class="text-xl font-semibold mb-4 text-indigo-400">Recent Activity</h2>

      <table class="w-full text-sm">
        <thead class="text-gray-400 border-b border-gray-700">
          <tr>
            <th class="text-left py-2">Date</th>
            <th class="text-left py-2">Action</th>
            <th class="text-left py-2">Status</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-700">
          <tr>
            <td class="py-2">2026-01-10</td>
            <td class="py-2">Login</td>
            <td class="py-2 text-green-400">Success</td>
          </tr>
          <tr>
            <td class="py-2">2026-01-11</td>
            <td class="py-2">Profile Update</td>
            <td class="py-2 text-green-400">Success</td>
          </tr>
          <tr>
            <td class="py-2">2026-01-12</td>
            <td class="py-2">Password Change</td>
            <td class="py-2 text-red-400">Failed</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="bg-gray-800 rounded-xl p-6 shadow-lg">
      <h2 class="text-xl font-semibold mb-4 text-indigo-400">Internal Notes</h2>
      <textarea
        class="w-full h-32 rounded-lg bg-gray-900 border border-gray-700 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"
        placeholder="Write internal notes here..."></textarea>
    </div>

    <div class="text-center text-xs text-gray-500 border-t border-gray-700 pt-4">
      © 2026 Internal System – Hidden Tailwind Section
    </div>

  </div>
</div>